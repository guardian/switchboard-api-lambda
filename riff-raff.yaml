regions: [eu-west-1]
stacks: [cms-fronts]
templates:
  lambda:
    type: aws-lambda
    parameters:
      prefixStack: false
      bucket: facia-dist
deployments:
  switchboardAPILambda:
    type: aws-s3
    parameters:
      bucket: facia-dist
      cacheControl: public, max-age=315360000
      prefixStack: false
      publicReadAcl: false

  switchboardStatic:
    type: aws-s3
    parameters:
      bucket: cms-fronts-static-assets
      cacheControl:
        - pattern: .*\\.js$
          value: public, max-age=315360000
        - pattern: .*\\.css$
          value: public, max-age=315360000
        - pattern: .*\\.jpg$
          value: public, max-age=315360000
        - pattern: .*
          value: public, max-age=60
      mimeTypes: {
        "js": "application/javascript",
        "css": "text/css",
        "jpg": "image/jpeg"
      }
      prefixStack: false
  
  switchesLambda:
    template: lambda
    contentDirectory: switchboardAPILambda
    parameters:
      fileName: switchboardAPILambda.zip
      functionNames:
        - "switches-lambda-switchboard-api-"
    dependencies:
     - switchboardAPILambda
     - switchboardStatic

  statusLambda:
    template: lambda
    contentDirectory: switchboardAPILambda
    parameters:
      fileName: switchboardAPILambda.zip
      functionNames:
        - "status-lambda-switchboard-api-"
    dependencies:
     - switchboardAPILambda
     - switchboardStatic

  toggleLambda:
    template: lambda
    contentDirectory: switchboardAPILambda
    parameters:
      fileName: switchboardAPILambda.zip
      functionNames:
        - "status-lambda-switchboard-api-"
    dependencies:
    - switchboardAPILambda
    - switchboardStatic
